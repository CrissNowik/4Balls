<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <title>4Balls</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi"/>
        <link href="https://fonts.googleapis.com/css?family=Coiny" rel="stylesheet">
        <link rel="stylesheet" href="main.css">
        <script src="js/BoardRenderer.js"></script>
        <script src="js/BoardModel.js"></script>
        <script src="js/Game.js"></script>
        <script>
            let game;
    
            function init(){
                canvas = initFullScreenCanvas("mainCanvas__canvas");
                game = new Game(canvas);

                if (isTouchDevice()) {
                    canvas.addEventListener("touchstart", function(e){
                        let touch = event.targetTouches[0];
                        game.handleClick(touch.pageX, touch.pageY);
                        e.stopPropagation();
                        e.preventDefault();
                    }, false);
                } else {
                    canvas.addEventListener("mouseup", function(e){
                        game.handleClick(e.pageX, e.pageY);
                        e.stopPropagation();
                        e.preventDefault();
                    }, false);
                }
            };
           
/**
fitting canvas to page size
@param canvasID - string - ID of html canvas tag
*/
            function initFullScreenCanvas(canvasID) {
                let canvas = document.getElementById(canvasID);
                resizeCanvas(canvas);
                window.addEventListener("resize", function () {
                    resizeCanvas(canvas);
                });
                return canvas;
            }
/**
change canvas size
*/
            function resizeCanvas(canvas) {
                canvas.width = document.width || document.body.clientWidth;
                canvas.height = document.height || document.body.clientHeight;
                game && game.handleResize();
            }

            function isTouchDevice() {
                return ('ontouchstart' in document.documentElement);
            }
        </script> 
    </head>
    <body onload="init()">
        <header class="header">
            <h1 class="header__title">4 Balls</h1>
        </header>
        <main class="mainCanvas">
            <canvas id="mainCanvas__canvas" width="300px" height="300px"></canvas>
        </main>
    </body> 
</html>
